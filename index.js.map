{"version":3,"file":"index.js","sources":["lib/error-types.js","lib/custom-error.js","lib/error-handler.js","lib/performance.js","node_modules/js-cookie/src/js.cookie.js","node_modules/ajax-hook/src/ajaxhook.js","node_modules/ajax-hook/index.js","lib/xhr.js","node_modules/eventemitter3/index.js","lib/utils.js","lib/logger.js","lib/cyclops.js"],"sourcesContent":["export const SCRIPT_UNCAUGHT_ERR = \"ScriptUncaughtError\"\nexport const ASSETS_LOAD_FAIL = \"AssetsLoadFail\"\nexport const XHR_RESPONSE_ERR = \"XhrResponseError\"\n\nexport const ASSETS_LOAD_SLOW = \"AssetsLoadSlow\"\n","class LogEvent {\n  constructor(src, type, extra) {\n    this.fileName = src\n    this.message = src\n    this.name = type\n    this.type = type\n    this.extra = extra\n  }\n}\n\nexport class AssetsLog extends LogEvent {\n  constructor(e) {\n    super(e.source, e.type, e)\n    this.logger = \"assets\"\n    this.message = `LOAD FAIL: ${e.source}`\n  }\n}\n\nexport class XhrLog extends LogEvent {\n  constructor(e) {\n    super(e.url, e.type, e)\n    this.logger = \"xhr\"\n    this.message = `${e.method} ${e.status}: ${e.url}`\n    this.tags = {\n      status: e.status\n    }\n  }\n}\n","import * as ErrorTypes from \"./error-types\"\nimport { AssetsLog } from \"./custom-error\"\nexport const watchGlobalError = (logger, conf = {}) => {\n  window.addEventListener(\"error\", handleError(logger, conf), true)\n  window.addEventListener(\n    \"unhandledrejection\",\n    event => {\n      console.warn(\"WARNING: Unhandled promise rejection. Shame on you! Reason: \" + event.reason)\n    },\n    true\n  )\n  window.addEventListener(\"rejectionhandled\", event => {\n    console.log(\"REJECTIONHANDLED\")\n  })\n}\n\nfunction handleError(logger, conf) {\n  return e => {\n    logger.error(formatError(e))\n    conf.callback && conf.callback()\n    if (conf.prevent) {\n      e.preventDefault()\n    }\n  }\n}\n\nfunction formatError(errorEvent) {\n  if (errorEvent.filename) {\n    // return {\n    //   type: ErrorTypes.SCRIPT_UNCAUGHT_ERR,\n    //   source: errorEvent.filename,\n    //   message: errorEvent.message,\n    //   lineNo: errorEvent.lineno,\n    //   colNo: errorEvent.colno\n    // }\n    return null\n  }\n  return new AssetsLog({\n    type: ErrorTypes.ASSETS_LOAD_FAIL,\n    source: errorEvent.srcElement.src,\n    node: errorEvent.srcElement.nodeName\n  })\n}\n","import * as ErrorTypes from \"./error-types\"\n\nexport const calculateLoadTimes = (logger, conf = {}) => {\n  if (performance === undefined) {\n    console.log(\"= Calculate Load Times: performance NOT supported\")\n    return\n  }\n\n  const resources = performance.getEntriesByType(\"resource\")\n\n  if (resources === undefined || resources.length <= 0) {\n    console.log(\"= Calculate Load Times: there are NO `resource` performance records\")\n    return\n  }\n\n  resources.forEach(res => {\n    const times = serializeResourceTime(res)\n    if (times.duration >= (conf.max_duration || 10000)) {\n      times.type = ErrorTypes.ASSETS_LOAD_SLOW\n      logger.warning(times)\n    }\n  })\n}\n\nfunction serializeResourceTime(res) {\n  return {\n    name: res.name,\n    redirectTime: res.redirectEnd - res.redirectStart,\n    dnsTime: res.domainLookupEnd - res.domainLookupStart,\n    tcpHandshakeTime: res.connectEnd - res.connectStart,\n    secureTime: res.secureConnectionStart > 0 ? res.connectEnd - res.secureConnectionStart : \"0\",\n    responseTime: res.responseEnd - res.responseStart,\n    duration: res.startTime > 0 ? res.responseEnd - res.startTime : \"0\"\n  }\n}\n","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/*\n * author: wendu\n * email: 824783146@qq.com\n * source code: https://github.com/wendux/Ajax-hook\n **/\nmodule.exports=function (ob) {\n    ob.hookAjax = function (funs) {\n        window._ahrealxhr = window._ahrealxhr || XMLHttpRequest\n        XMLHttpRequest = function () {\n            this.xhr = new window._ahrealxhr;\n            for (var attr in this.xhr) {\n                var type = \"\";\n                try {\n                    type = typeof this.xhr[attr]\n                } catch (e) {}\n                if (type === \"function\") {\n                    this[attr] = hookfun(attr);\n                } else {\n                    Object.defineProperty(this, attr, {\n                        get: getFactory(attr),\n                        set: setFactory(attr)\n                    })\n                }\n            }\n        }\n\n        function getFactory(attr) {\n            return function () {\n                return this.hasOwnProperty(attr + \"_\")?this[attr + \"_\"]:this.xhr[attr];\n            }\n        }\n\n        function setFactory(attr) {\n            return function (f) {\n                var xhr = this.xhr;\n                var that = this;\n                if (attr.indexOf(\"on\") != 0) {\n                    this[attr + \"_\"] = f;\n                    return;\n                }\n                if (funs[attr]) {\n                    xhr[attr] = function () {\n                        funs[attr](that) || f.apply(xhr, arguments);\n                    }\n                } else {\n                    xhr[attr] = f;\n                }\n            }\n        }\n\n        function hookfun(fun) {\n            return function () {\n                var args = [].slice.call(arguments)\n                if (funs[fun] && funs[fun].call(this, args, this.xhr)) {\n                    return;\n                }\n                return this.xhr[fun].apply(this.xhr, args);\n            }\n        }\n        return window._ahrealxhr;\n    }\n    ob.unHookAjax = function () {\n        if (window._ahrealxhr)  XMLHttpRequest = window._ahrealxhr;\n        window._ahrealxhr = undefined;\n    }\n    //for typescript\n    ob.default=ob;\n}\n","require(\"./src/ajaxhook\")(module.exports)\n","import ah from \"ajax-hook\"\nimport * as ErrorTypes from \"./error-types\"\nimport { XhrLog } from \"./custom-error\"\n\nexport const watchAsyncCalls = logger => {\n  ah.hookAjax({\n    setRequestHeader: getRequestHeaders,\n    send: beforeSend,\n    open: beforeOpen,\n    onreadystatechange: handleStateChange\n  })\n  function beforeOpen([method]) {\n    this._method = method\n  }\n  function getRequestHeaders(kvPair) {\n    if (!this._requestHeaders) this._requestHeaders = \"\"\n    this._requestHeaders += `${kvPair[0]}: ${kvPair[1]}\\n`\n  }\n\n  function beforeSend(body) {\n    this._requestBody = body\n    this._cookies = document.cookie\n  }\n\n  function handleStateChange(ctx) {\n    if (ctx.readyState === 4 && ctx.status >= 400) {\n      logger.log(\"error\", new XhrLog(serialize(ctx)))\n    }\n  }\n}\n\nfunction serialize(ctx) {\n  return {\n    type: ErrorTypes.XHR_RESPONSE_ERR,\n    status: ctx.status,\n    url: ctx.responseURL,\n    method: ctx._method,\n    response: {\n      headers: ctx.getAllResponseHeaders()\n    },\n    request: {\n      headers: ctx._requestHeaders,\n      body: ctx._requestBody[0],\n      cookies: ctx._cookies\n    }\n  }\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","export const generateTraceId = () =>\n  Math.random()\n    .toString(36)\n    .slice(2) + new Date().getTime()\n","import EventEmitter from \"eventemitter3\"\nimport { generateTraceId } from \"./utils\"\n\nconst levels = [\"error\", \"debug\", \"warning\"]\n\nclass Logger extends EventEmitter {\n  constructor(conf) {\n    super()\n\n    this.id = generateTraceId()\n\n    levels.forEach(type => {\n      this[type] = payload => this.log(type, payload)\n    })\n\n    this.on(\"log\", e => {\n      if (!e.payload) return\n      const { type, extra, logger, tags, fileName } = e.payload\n      Raven.captureMessage(e.payload.message, {\n        tags: Object.assign(\n          {\n            url: fileName,\n            category: type\n          },\n          tags\n        ),\n        logger,\n        level: e.type,\n        extra: extra\n      })\n      // Raven.captureMessage(e.payload.type, {\n      //   tags: {\n      //     category: e.payload.type\n      //   },\n      //   level: e.type,\n      //   extra: e.payload\n      // })\n      // fetch(\"//localhost:4000/error\", {\n      //   method: \"POST\",\n      //   body: JSON.stringify(e.payload),\n      //   headers: new Headers({ \"Content-Type\": \"application/json\", \"X-Error-Type\": e.payload.type })\n      // })\n    })\n  }\n\n  log(type, payload) {\n    this.emit(\"log\", {\n      type,\n      payload\n    })\n  }\n}\n\nexport default Logger\n","import { watchGlobalError } from \"./error-handler\"\nimport { calculateLoadTimes } from \"./performance\"\nimport { getUserFromCookie } from \"./get-local-info\"\nimport { watchAsyncCalls } from \"./xhr\"\nimport Logger from \"./logger\"\n\nclass Cyclops {\n  constructor(conf) {\n    this.conf = conf\n    this.logger = new Logger()\n  }\n\n  send() {}\n\n  start() {\n    watchAsyncCalls(this.logger, this.conf)\n    watchGlobalError(this.logger, this.conf.errorHandler)\n    window.onload = () => calculateLoadTimes(this.logger, this.conf.performance)\n  }\n}\n\nexport default Cyclops\n"],"names":["ASSETS_LOAD_FAIL","XHR_RESPONSE_ERR","ASSETS_LOAD_SLOW","LogEvent","src","type","extra","fileName","message","name","AssetsLog","e","source","logger","XhrLog","url","method","status","tags","watchGlobalError","conf","addEventListener","handleError","warn","event","reason","log","error","formatError","callback","prevent","preventDefault","errorEvent","filename","ErrorTypes","srcElement","nodeName","calculateLoadTimes","performance","undefined","resources","getEntriesByType","length","forEach","times","serializeResourceTime","res","duration","max_duration","warning","redirectEnd","redirectStart","domainLookupEnd","domainLookupStart","connectEnd","connectStart","secureConnectionStart","responseEnd","responseStart","startTime","define","require$$0","watchAsyncCalls","hookAjax","getRequestHeaders","beforeSend","beforeOpen","handleStateChange","_method","kvPair","_requestHeaders","body","_requestBody","_cookies","document","cookie","ctx","readyState","serialize","responseURL","getAllResponseHeaders","generateTraceId","Math","random","toString","slice","Date","getTime","levels","Logger","id","payload","on","captureMessage","Object","assign","emit","EventEmitter","Cyclops","errorHandler","onload"],"mappings":"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"}
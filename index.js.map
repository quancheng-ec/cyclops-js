{"version":3,"file":"index.js","sources":["lib/error-handler.js","lib/performance.js","node_modules/js-cookie/src/js.cookie.js","lib/get-local-info.js","node_modules/ajax-hook/src/ajaxhook.js","node_modules/ajax-hook/index.js","lib/xhr.js","lib/utils.js","lib/cyclops.js"],"sourcesContent":["export const watchGlobalError = (conf = {}) => {\n  window.addEventListener('error', handleError(conf), true)\n  window.addEventListener(\n    'unhandledrejection',\n    event => {\n      console.warn(\n        'WARNING: Unhandled promise rejection. Shame on you! Reason: ' +\n          event.reason\n      )\n    },\n    true\n  )\n  window.addEventListener('rejectionhandled', event => {\n    console.log('REJECTIONHANDLED')\n  })\n}\n\nfunction handleError(conf) {\n  return e => {\n    console.log('catch error: ', formatError(e))\n    conf.callback && conf.callback()\n    if (conf.prevent) {\n      e.preventDefault()\n    }\n  }\n}\n\nfunction formatError(errorEvent) {\n  if (errorEvent.filename) {\n    return {\n      type: 'script',\n      source: errorEvent.filename,\n      message: errorEvent.message,\n      lineNo: errorEvent.lineno,\n      colNo: errorEvent.colno\n    }\n  }\n  return {\n    type: 'assets',\n    source: errorEvent.srcElement.src\n  }\n}\n","export const calculateLoadTimes = conf => {\n  if (performance === undefined) {\n    console.log('= Calculate Load Times: performance NOT supported')\n    return\n  }\n\n  const resources = performance.getEntriesByType('resource')\n\n  if (resources === undefined || resources.length <= 0) {\n    console.log(\n      '= Calculate Load Times: there are NO `resource` performance records'\n    )\n    return\n  }\n\n  console.log('resources: ', resources.map(serializeResourceTime))\n}\n\nfunction serializeResourceTime(res) {\n  return {\n    name: res.name,\n    redirectTime: res.redirectEnd - res.redirectStart,\n    dnsTime: res.domainLookupEnd - res.domainLookupStart,\n    tcpHandshakeTime: res.connectEnd - res.connectStart,\n    secureTime:\n      res.secureConnectionStart > 0\n        ? res.connectEnd - res.secureConnectionStart\n        : '0',\n    responseTime: res.responseEnd - res.responseStart,\n    duration: res.startTime > 0 ? res.responseEnd - res.startTime : '0'\n  }\n}\n","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","import Cookies from 'js-cookie'\n\nexport const getUserFromCookie = () => {\n  const user = {}\n  ;['userId', 'companyId', 'pToken'].forEach(item => {\n    user[item] = Cookies.get(item)\n  })\n  return user\n}\n","/*\n * author: wendu\n * email: 824783146@qq.com\n * source code: https://github.com/wendux/Ajax-hook\n **/\nmodule.exports=function (ob) {\n    ob.hookAjax = function (funs) {\n        window._ahrealxhr = window._ahrealxhr || XMLHttpRequest\n        XMLHttpRequest = function () {\n            this.xhr = new window._ahrealxhr;\n            for (var attr in this.xhr) {\n                var type = \"\";\n                try {\n                    type = typeof this.xhr[attr]\n                } catch (e) {}\n                if (type === \"function\") {\n                    this[attr] = hookfun(attr);\n                } else {\n                    Object.defineProperty(this, attr, {\n                        get: getFactory(attr),\n                        set: setFactory(attr)\n                    })\n                }\n            }\n        }\n\n        function getFactory(attr) {\n            return function () {\n                return this.hasOwnProperty(attr + \"_\")?this[attr + \"_\"]:this.xhr[attr];\n            }\n        }\n\n        function setFactory(attr) {\n            return function (f) {\n                var xhr = this.xhr;\n                var that = this;\n                if (attr.indexOf(\"on\") != 0) {\n                    this[attr + \"_\"] = f;\n                    return;\n                }\n                if (funs[attr]) {\n                    xhr[attr] = function () {\n                        funs[attr](that) || f.apply(xhr, arguments);\n                    }\n                } else {\n                    xhr[attr] = f;\n                }\n            }\n        }\n\n        function hookfun(fun) {\n            return function () {\n                var args = [].slice.call(arguments)\n                if (funs[fun] && funs[fun].call(this, args, this.xhr)) {\n                    return;\n                }\n                return this.xhr[fun].apply(this.xhr, args);\n            }\n        }\n        return window._ahrealxhr;\n    }\n    ob.unHookAjax = function () {\n        if (window._ahrealxhr)  XMLHttpRequest = window._ahrealxhr;\n        window._ahrealxhr = undefined;\n    }\n    //for typescript\n    ob.default=ob;\n}\n","require(\"./src/ajaxhook\")(module.exports)\n","import ah from 'ajax-hook'\nimport parseHeaders from 'parse-headers'\n\nexport const watchAsyncCalls = conf => {\n  return ah.hookAjax({\n    setRequestHeader: getRequestHeaders,\n    send: beforeSend,\n    onreadystatechange: handleStateChange\n  })\n}\n\nfunction getRequestHeaders(kvPair) {\n  if (!this._requestHeaders) this._requestHeaders = ''\n  this._requestHeaders += `${kvPair[0]}: ${kvPair[1]}\\n`\n}\n\nfunction beforeSend(body) {\n  this._requestBody = body\n  this._cookies = document.cookie\n}\n\nfunction handleStateChange(ctx) {\n  if (ctx.readyState === 4 && ctx.status >= 400) {\n    console.log(serialize(ctx))\n  }\n}\n\nfunction serialize(ctx) {\n  return {\n    status: ctx.status,\n    url: ctx.responseURL,\n    response: {\n      headers: ctx.getAllResponseHeaders()\n    },\n    request: {\n      headers: ctx._requestHeaders,\n      body: ctx._requestBody[0],\n      cookies: ctx._cookies\n    }\n  }\n}\n","export const generateTraceId = () =>\n  Math.random()\n    .toString(36)\n    .slice(2) + new Date().getTime()\n","import { watchGlobalError } from './error-handler'\nimport { calculateLoadTimes } from './performance'\nimport { getUserFromCookie } from './get-local-info'\nimport { watchAsyncCalls } from './xhr'\nimport { generateTraceId } from './utils'\n\nclass Cyclops {\n  constructor(conf) {\n    this.conf = conf\n    this._baseInfo = {\n      user: getUserFromCookie(),\n      traceId: generateTraceId()\n    }\n  }\n\n  send(level) {}\n\n  start() {\n    watchAsyncCalls(this.conf)\n    watchGlobalError(this.conf.errorHandler)\n    window.onload = calculateLoadTimes\n  }\n}\n\nexport default Cyclops\n"],"names":["watchGlobalError","conf","addEventListener","handleError","warn","event","reason","log","formatError","e","callback","prevent","preventDefault","errorEvent","filename","message","lineno","colno","srcElement","src","calculateLoadTimes","performance","undefined","resources","getEntriesByType","length","map","serializeResourceTime","res","name","redirectEnd","redirectStart","domainLookupEnd","domainLookupStart","connectEnd","connectStart","secureConnectionStart","responseEnd","responseStart","startTime","define","getUserFromCookie","user","forEach","item","Cookies","get","require$$0","watchAsyncCalls","ah","hookAjax","getRequestHeaders","beforeSend","handleStateChange","kvPair","_requestHeaders","body","_requestBody","_cookies","document","cookie","ctx","readyState","status","serialize","responseURL","getAllResponseHeaders","generateTraceId","Math","random","toString","slice","Date","getTime","Cyclops","_baseInfo","level","errorHandler","onload"],"mappings":"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"}